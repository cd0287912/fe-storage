### 变量对象

每个上下文都关联了一个变量对象，这个上下文中定义的所有变量和函数都存在于这个对象上。

这里我们主要知道全局上下文的变量对象与函数上下文的变量对象。

### 全局上下文

全局上下文是最外层的上下文，浏览器中全局上下文就是我们常说的 window 对象。即全局上下文中的变量对象就是全局对象呐！

### 函数上下文

在函数上下文中，我们用活动对象(activation object, AO)来表示变量对象。

活动对象和变量对象其实是一个东西，只是变量对象是规范上的或者说是引擎实现上的，不可在 JavaScript 环境中访问，只有到当进入一个执行上下文中，这个执行上下文的变量对象才会被激活，所以才叫 activation object 呐，而只有被激活的变量对象，也就是活动对象上的各种属性才能被访问。

活动对象是在进入函数上下文时刻被创建的，它通过函数的 arguments 属性初始化。arguments 属性值是 Arguments 对象。

### 执行过程

执行代码会分为两个阶段

- 分析执行上下文
- 代码执行
  比如:

```js
function foo(a) {
  var b = 2;
  function c() {}
  var d = function () {};

  b = 3;
}
foo(1);
```

分析执行上下文，这时候的 AO 是:

```js
AO = {
  arguments: {
    0: 1,
    length: 1
  },
  a: 1,
  b: undefined,
  c: reference to function c(){},
  d: undefined
}
```

执行阶段，会顺序执行代码，根据代码，修改变量对象的值，当代码执行完后，这时候的 AO 是：

```js
AO = {
    arguments: {
        0: 1,
        length: 1
    },
    a: 1,
    b: 3,
    c: reference to function c(){},
    d: reference to FunctionExpression "d"
}
```

### 总结:

- **全局上下文的变量对象初始化是全局对象**
- **函数上下文的变量对象初始化只包括 Arguments 对象**
- **在进入执行上下文时会给变量对象添加形参、函数声明、变量声明等初始的属性值**
- **在代码执行阶段，会再次修改变量对象的属性值**
